"use strict";(self.webpackChunkanyshake_org=self.webpackChunkanyshake_org||[]).push([[9296],{529:(e,r,n)=>{n.d(r,{A:()=>i});const i=n.p+"assets/images/stlink-connection-3f468dd77a3d1d90318f73473849c184.webp"},713:(e,r,n)=>{n.d(r,{A:()=>i});const i=n.p+"assets/images/upload-succeed-6404d4a9ee5d8edada49087c2579f2e4.webp"},2291:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"anyshake-explorer/E-C111G/advanced-operations/firmware-upgrade","title":"Firmware Upgrade","description":"This tutorial applies to AnyShake Explorer E-C121G as well.","source":"@site/docs/anyshake-explorer/E-C111G/advanced-operations/firmware-upgrade.md","sourceDirName":"anyshake-explorer/E-C111G/advanced-operations","slug":"/anyshake-explorer/E-C111G/advanced-operations/firmware-upgrade","permalink":"/docs/anyshake-explorer/E-C111G/advanced-operations/firmware-upgrade","draft":false,"unlisted":false,"editUrl":"https://github.com/anyshake/homepage/blob/master/docs/anyshake-explorer/E-C111G/advanced-operations/firmware-upgrade.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"Firmware Upgrade","slug":"firmware-upgrade"},"sidebar":"tutorialSidebar","previous":{"title":"Troubleshooting","permalink":"/docs/anyshake-explorer/E-C111G/troubleshooting"},"next":{"title":"ADC Calibration","permalink":"/docs/anyshake-explorer/E-C111G/advanced-operations/adc-calibration"}}');var s=n(4848),t=n(8453);const a={sidebar_position:1,title:"Firmware Upgrade",slug:"firmware-upgrade"},o=void 0,d={},l=[{value:"Before Upgrading",id:"before-upgrading",level:2},{value:"Connect E-C111G SWD Interface to PC",id:"connect-e-c111g-swd-interface-to-pc",level:2},{value:"Install Driver for Programmer",id:"install-driver-for-programmer",level:2},{value:"Setup PlatformIO",id:"setup-platformio",level:2},{value:"Get Latest Firmware",id:"get-latest-firmware",level:2},{value:"Open Firmware Project",id:"open-firmware-project",level:2},{value:"Customize Build Settings",id:"customize-build-settings",level:2},{value:"GNSS_BAUDRATE",id:"gnss_baudrate",level:3},{value:"USE_ICM42688",id:"use_icm42688",level:3},{value:"Build and Upload",id:"build-and-upload",level:2},{value:"After Flashing",id:"after-flashing",level:2}];function c(e){const r={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.admonition,{type:"info",children:(0,s.jsxs)(r.p,{children:["This tutorial applies to AnyShake Explorer ",(0,s.jsx)(r.strong,{children:"E-C121G"})," as well."]})}),"\n",(0,s.jsxs)(r.p,{children:["This tutorial will guide you through the process of upgrading the firmware on the AnyShake Explorer ",(0,s.jsx)(r.strong,{children:"E-C111G"}),"."]}),"\n",(0,s.jsx)(r.h2,{id:"before-upgrading",children:"Before Upgrading"}),"\n",(0,s.jsxs)(r.p,{children:["The E-C111G is based on the ARM Cortex-M3 core. The upgrade process is usually done via an ",(0,s.jsx)(r.strong,{children:"SWD interface"}),". To upgrade the firmware, you need a ",(0,s.jsx)(r.strong,{children:"debugger"})," that supports SWD, such as ",(0,s.jsx)(r.strong,{children:"ST-Link"})," or ",(0,s.jsx)(r.strong,{children:"J-Link"}),"."]}),"\n",(0,s.jsxs)(r.p,{children:["In this tutorial, we use the official ",(0,s.jsx)(r.strong,{children:"ST-Link V2"})," for demonstration purposes."]}),"\n",(0,s.jsx)(r.admonition,{type:"tip",children:(0,s.jsxs)(r.p,{children:["Third-party programmers that are ",(0,s.jsx)(r.strong,{children:"compatible with ST-Link V2"})," are also supported. These alternatives are often more affordable and work reliably with AnyShake Explorer E-C111G."]})}),"\n",(0,s.jsx)(r.h2,{id:"connect-e-c111g-swd-interface-to-pc",children:"Connect E-C111G SWD Interface to PC"}),"\n",(0,s.jsx)(r.p,{children:"Dissamble the E-C111G enclosure and connect the SWD pins to your PC using ST-Link V2, connect the pins as follows:"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"ST-Link V2 Pin"}),(0,s.jsx)(r.th,{children:"E-C111G Pin"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Pin 4 (GND)"}),(0,s.jsx)(r.td,{children:"GND"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Pin 7 (SWDIO)"}),(0,s.jsx)(r.td,{children:"DIO"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Pin 9 (SWCLK)"}),(0,s.jsx)(r.td,{children:"CLK"})]})]})]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.img,{alt:"ST-Link V2 wiring",src:n(6679).A+"",width:"1804",height:"676"})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.img,{alt:"Connection in reality",src:n(529).A+"",width:"1280",height:"721"})}),"\n",(0,s.jsx)(r.admonition,{title:"Caution",type:"danger",children:(0,s.jsxs)(r.p,{children:["The SWD interface is ",(0,s.jsx)(r.strong,{children:"not electrically isolated"}),". Use caution when connecting to a powered system to avoid potential damage to your programmer or the device."]})}),"\n",(0,s.jsx)(r.h2,{id:"install-driver-for-programmer",children:"Install Driver for Programmer"}),"\n",(0,s.jsxs)(r.p,{children:["On ",(0,s.jsx)(r.strong,{children:"Linux"})," systems, no additional driver installation is required. ST-Link programmers are supported through the standard ",(0,s.jsx)(r.code,{children:"libusb"})," interface."]}),"\n",(0,s.jsxs)(r.p,{children:["On ",(0,s.jsx)(r.strong,{children:"Windows"}),", you need to manually install the ST-Link USB driver. You can download the latest version from the ",(0,s.jsx)(r.a,{href:"https://www.st.com/en/development-tools/stsw-link009.html",children:"STMicroelectronics website"}),"."]}),"\n",(0,s.jsxs)(r.p,{children:["After installing the driver, open ",(0,s.jsx)(r.strong,{children:"Device Manager"})," and check under ",(0,s.jsx)(r.strong,{children:"Universal Serial Bus Devices"}),"."]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.img,{alt:"Windows ST-Link Driver",src:n(5961).A+"",width:"1013",height:"724"})}),"\n",(0,s.jsxs)(r.admonition,{type:"tip",children:[(0,s.jsxs)(r.p,{children:["On Linux (e.g. Debian) systems, if you have ",(0,s.jsx)(r.code,{children:"stlink-tools"})," package installed, you can use the ",(0,s.jsx)(r.code,{children:"st-info"})," command to check if MCU is recognized by the programmer. For example:"]}),(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"$ st-info --probe\n"})}),(0,s.jsx)(r.p,{children:"Typical output:"}),(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{children:"Found 1 stlink programmers\n  version:    V2J29S7\n  serial:     ************************\n  flash:      131072 (pagesize: 1024)\n  sram:       20480\n  chipid:     0x410\n  dev-type:   STM32F1xx_MD\n"})}),(0,s.jsx)(r.p,{children:"With non-zero chipid and dev-type in the output, which indicates that the device has been successfully recognized by the programmer."})]}),"\n",(0,s.jsx)(r.h2,{id:"setup-platformio",children:"Setup PlatformIO"}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.a,{href:"https://platformio.org/",children:"PlatformIO"})," is an open-source embedded development environment used to build and upload firmware. To install PlatformIO, you need install ",(0,s.jsx)(r.a,{href:"https://www.python.org/",children:"Python"})," and ",(0,s.jsx)(r.a,{href:"https://code.visualstudio.com/",children:"Visual Studio Code"})," first."]}),"\n",(0,s.jsxs)(r.p,{children:["After installing, you can open Visual Studio Code and click ",(0,s.jsx)(r.strong,{children:"Extensions"}),', search to install "PlatformIO" extension.']}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.img,{alt:"Install PlatformIO",src:n(3568).A+"",width:"1308",height:"705"})}),"\n",(0,s.jsx)(r.p,{children:"It usually takes a few minutes to install the extension. Restart Viaual Studio Code after PlatformIO installation for the extension to initialize properly."}),"\n",(0,s.jsx)(r.h2,{id:"get-latest-firmware",children:"Get Latest Firmware"}),"\n",(0,s.jsxs)(r.p,{children:["The firmware source code for E-C111G is located in the default ",(0,s.jsx)(r.code,{children:"master"})," branch of the ",(0,s.jsx)(r.a,{href:"https://github.com/anyshake/explorer",children:"AnyShake Explorer GitHub repository"}),", under the ",(0,s.jsx)(r.code,{children:"firmware/"})," directory."]}),"\n",(0,s.jsx)(r.p,{children:"To get source files, you need to clone the repository and checkout the corresponding branch."}),"\n",(0,s.jsxs)(r.p,{children:["If you have ",(0,s.jsx)(r.code,{children:"git"})," installed, you can use the following command to clone the repository:"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"$ git clone --depth 1 https://github.com/anyshake/explorer\n"})}),"\n",(0,s.jsxs)(r.p,{children:["Or get the latest project files using the following direct link, after downloading, extract the archive and locate the ",(0,s.jsx)(r.code,{children:"firmware"})," directory."]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"https://github.com/anyshake/explorer/archive/refs/heads/master.zip",children:"github.com/anyshake/explorer/archive/refs/heads/master.zip"})}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"https://github.com/anyshake/explorer/archive/refs/heads/master.tar.gz",children:"github.com/anyshake/explorer/archive/refs/heads/master.tar.gz"})}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"open-firmware-project",children:"Open Firmware Project"}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsxs)(r.li,{children:["Press ",(0,s.jsx)(r.code,{children:"Ctrl + K, O"})," (or ",(0,s.jsx)(r.code,{children:"Cmd + K, O"})," on macOS)"]}),"\n",(0,s.jsxs)(r.li,{children:["Select the ",(0,s.jsx)(r.code,{children:"firmware"})," folder inside the repository"]}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.img,{alt:"Open firmware Folder",src:n(8793).A+"",width:"1487",height:"814"})}),"\n",(0,s.jsxs)(r.p,{children:["You should see the ",(0,s.jsx)(r.code,{children:"platformio.ini"})," file in the root of the project. PlatformIO will automatically initialize the environment."]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.img,{alt:"Verify project",src:n(7884).A+"",width:"1920",height:"877"})}),"\n",(0,s.jsx)(r.h2,{id:"customize-build-settings",children:"Customize Build Settings"}),"\n",(0,s.jsxs)(r.p,{children:["Open the ",(0,s.jsx)(r.code,{children:"platformio.ini"})," file and customize the settings according to your needs. There are a few options to customize:"]}),"\n",(0,s.jsx)(r.h3,{id:"gnss_baudrate",children:"GNSS_BAUDRATE"}),"\n",(0,s.jsxs)(r.p,{children:["The ",(0,s.jsx)(r.code,{children:"GNSS_BAUDRATE"})," macro controls the baud rate of the on-board GNSS module. By default, it is set to ",(0,s.jsx)(r.code,{children:"9600"}),", which is compatible with most GNSS modules. However, some modules may require a different baud rate for proper communication."]}),"\n",(0,s.jsx)(r.p,{children:"Below is a reference table listing common GNSS module models and their corresponding recommended baud rates:"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Manufacturer"}),(0,s.jsx)(r.th,{children:"Model"}),(0,s.jsx)(r.th,{children:"Baud Rate (bps)"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"ZHONGKEWEI"}),(0,s.jsx)(r.td,{children:"ATGM332D"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"9600"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Allystar"}),(0,s.jsx)(r.td,{children:"TAU1114"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"9600"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Quectel"}),(0,s.jsx)(r.td,{children:"LC260Z"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"115200"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"u-blox"}),(0,s.jsx)(r.td,{children:"MAX-M10S-00B"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"38400"})})]})]})]}),"\n",(0,s.jsx)(r.h3,{id:"use_icm42688",children:"USE_ICM42688"}),"\n",(0,s.jsxs)(r.p,{children:["The ",(0,s.jsx)(r.code,{children:"USE_ICM42688"})," macro to enable the ICM-42688-P as built-in accelerometer. It is a compatibility option for AnyShake Explorer E-C121G."]}),"\n",(0,s.jsx)(r.admonition,{type:"danger",children:(0,s.jsx)(r.p,{children:"Enabling this macro in a non-E-C121G device may cause unexpected behavior."})}),"\n",(0,s.jsx)(r.h2,{id:"build-and-upload",children:"Build and Upload"}),"\n",(0,s.jsxs)(r.p,{children:["Click the ",(0,s.jsx)(r.strong,{children:"Upload"})," button in the PlatformIO toolbar to compile and flash the firmware."]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.img,{alt:"Build and Upload",src:n(5232).A+"",width:"1502",height:"369"})}),"\n",(0,s.jsx)(r.p,{children:"It usually takes a while to build firmware and upload to the device. If successful, you\u2019ll see a confirmation message:"}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.img,{alt:"Upload Success",src:n(713).A+"",width:"1106",height:"957"})}),"\n",(0,s.jsx)(r.h2,{id:"after-flashing",children:"After Flashing"}),"\n",(0,s.jsxs)(r.p,{children:["Remove the programmer from the E-C111G and reset the device by pressing the ",(0,s.jsx)(r.strong,{children:"RESET"})," button."]}),"\n",(0,s.jsx)(r.p,{children:"Your device is now running the updated firmware and ready for use!"})]})}function h(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},3568:(e,r,n)=>{n.d(r,{A:()=>i});const i=n.p+"assets/images/install-platformio-25f68357e277870a0e94165282ec5bb9.webp"},5232:(e,r,n)=>{n.d(r,{A:()=>i});const i=n.p+"assets/images/build-and-upload-9f2f2cb37d35023d0b8d96d1a6a38952.webp"},5961:(e,r,n)=>{n.d(r,{A:()=>i});const i=n.p+"assets/images/windows-stlink-v2-504bc18f6a46916d0072afd6d58c6d9d.webp"},6679:(e,r,n)=>{n.d(r,{A:()=>i});const i=n.p+"assets/images/stlink-wiring-c2775c0a9aee1df9aef21577ae8e8790.webp"},7884:(e,r,n)=>{n.d(r,{A:()=>i});const i=n.p+"assets/images/verify-project-62ee66abc835dc78313dc28b6f9fe032.webp"},8453:(e,r,n)=>{n.d(r,{R:()=>a,x:()=>o});var i=n(6540);const s={},t=i.createContext(s);function a(e){const r=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function o(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),i.createElement(t.Provider,{value:r},e.children)}},8793:(e,r,n)=>{n.d(r,{A:()=>i});const i=n.p+"assets/images/open-project-d0b2fd01abb8e1b912c26090a77b5546.webp"}}]);